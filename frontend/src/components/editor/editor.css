:root {
	--editor-line-height: 1.6em;
	--editor-transition: 220ms ease;
}

[data-color-scheme="dark"] {
	--color-bg-primary: #0f172a;
	--color-bg-secondary: #1e293b;
	--color-bg-tertiary: #334155;
	--color-bg-line-numbers: #0a0a0a;
	--color-text-primary: #e2e8f0;
	--color-text-secondary: #cbd5e1;
	--color-text-tertiary: #94a3b8;
	--color-border-primary: #334155;
	--color-border-secondary: #475569;
	--color-cursor-self: #60a5fa;
	--color-cursor-other-1: #ff6b6b;
	--color-cursor-other-2: #4ade80;
	--color-cursor-other-3: #fbbf24;
	--color-cursor-other-4: #c084fc;
	--color-line-number: #64748b;
	--color-line-number-active: #60a5fa;
	--color-selection: rgba(96, 165, 250, 0.4);
}

[data-color-scheme="light"] {
	--color-bg-primary: #ffffff;
	--color-bg-secondary: #f9fafb;
	--color-bg-tertiary: #f3f4f6;
	--color-bg-line-numbers: #f9fafb;
	--color-text-primary: #18181b;
	--color-text-secondary: #52525b;
	--color-text-tertiary: #71717a;
	--color-border-primary: #e4e4e7;
	--color-border-secondary: #d4d4d8;
	--color-cursor-self: #3b82f6;
	--color-cursor-other-1: #ef4444;
	--color-cursor-other-2: #22c55e;
	--color-cursor-other-3: #f59e0b;
	--color-cursor-other-4: #8b5cf6;
	--color-line-number: #a1a1a6;
	--color-line-number-active: #3b82f6;
	--color-selection: rgba(59, 130, 246, 0.28);
}

.editor-frame {
	display: flex;
	flex-direction: column;
	gap: 12px;
	height: 100%;
	background: var(--color-bg-primary);
	border: 1px solid var(--color-border-primary);
	border-radius: 14px;
	overflow: hidden;
	transition:
		background-color var(--editor-transition),
		border-color var(--editor-transition);
}

.editor-toolbar {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 12px;
	padding: 10px 14px;
	background: var(--color-bg-secondary);
	border-bottom: 1px solid var(--color-border-primary);
}

.editor-status-badge {
	display: inline-flex;
	align-items: center;
	gap: 8px;
	padding: 6px 10px;
	border-radius: 999px;
	font-size: 12px;
	font-weight: 700;
	text-transform: uppercase;
	color: var(--color-text-primary);
	background: color-mix(in srgb, var(--color-cursor-other-2) 18%, transparent);
	border: 1px solid color-mix(in srgb, var(--color-cursor-other-2) 35%, transparent);
}

.editor-status-dot {
	width: 8px;
	height: 8px;
	border-radius: 50%;
	background: var(--color-cursor-other-2);
	box-shadow: 0 0 0 4px color-mix(in srgb, var(--color-cursor-other-2) 15%, transparent);
}

.editor-toolbar-subtle {
	color: var(--color-text-tertiary);
	font-size: 12px;
	font-weight: 600;
}

.editor-container {
	display: flex;
	min-height: 380px;
	height: 100%;
	background: var(--color-bg-primary);
	color: var(--color-text-primary);
}

.editor-line-numbers {
	width: 50px;
	flex-shrink: 0;
	text-align: right;
	padding: 12px 10px;
	display: flex;
	flex-direction: column;
	gap: 0;
	background: var(--color-bg-line-numbers);
	color: var(--color-line-number);
	border-right: 1px solid var(--color-border-primary);
	overflow: hidden;
}

.editor-line-number {
	font-family: "Monaco", "Courier New", "SFMono-Regular", ui-monospace, monospace;
	font-size: 14px;
	line-height: var(--editor-line-height);
	height: var(--editor-line-height);
	display: flex;
	align-items: center;
	justify-content: flex-end;
	padding-right: 6px;
	border-radius: 6px;
	transition: background-color var(--editor-transition), color var(--editor-transition);
	font-variant-numeric: tabular-nums;
}

.editor-line-number.active {
	color: var(--color-line-number-active);
	background: color-mix(in srgb, var(--color-line-number-active) 18%, transparent);
	font-weight: 700;
}

.editor-content-column {
	flex: 1;
	min-width: 0;
	display: flex;
	background: var(--color-bg-primary);
	position: relative;
}

.editor-content-area {
	flex: 1;
	padding: 12px 16px;
	overflow: auto;
	font-family: "Monaco", "Courier New", "SFMono-Regular", ui-monospace, monospace;
	font-size: 14px;
	line-height: var(--editor-line-height);
	white-space: pre-wrap;
	word-break: break-word;
	color: var(--color-text-primary);
	background: var(--color-bg-primary);
	border: none;
	outline: none;
	display: flex;
	flex-direction: column;
	gap: 0;
	scrollbar-color: var(--color-border-secondary) transparent;
}

.editor-content-area:focus-visible {
	outline: 2px solid var(--color-border-secondary);
	outline-offset: -2px;
}

.editor-line {
	min-height: var(--editor-line-height);
	line-height: var(--editor-line-height);
	padding: 0;
	margin: 0;
	border-radius: 6px;
	position: relative;
	outline: none;
	transition: background-color var(--editor-transition), border-color var(--editor-transition);
}

.editor-line:focus-visible {
	outline: 2px solid var(--color-border-secondary);
	outline-offset: 2px;
}

.editor-line.active {
	background: color-mix(in srgb, var(--color-line-number-active) 12%, transparent);
}

.editor-line:hover {
	background: color-mix(in srgb, var(--color-bg-tertiary) 20%, transparent);
}

.editor-line::selection,
.editor-line *::selection {
	background: var(--color-selection);
	border-radius: 4px;
}

.editor-content-area::-webkit-scrollbar {
	width: 10px;
}

.editor-content-area::-webkit-scrollbar-track {
	background: color-mix(in srgb, var(--color-bg-secondary) 60%, transparent);
}

.editor-content-area::-webkit-scrollbar-thumb {
	background: color-mix(in srgb, var(--color-border-secondary) 70%, transparent);
	border-radius: 10px;
}

.editor-content-area::-webkit-scrollbar-thumb:hover {
	background: color-mix(in srgb, var(--color-border-secondary) 90%, transparent);
}

.editor-content-overlay {
	position: absolute;
	inset: 0;
	pointer-events: none;
}

.editor-cursor-indicator {
	position: absolute;
	width: 2px;
	border-radius: 2px;
	height: var(--editor-line-height);
	background: var(--color-cursor-other-1);
	translate: 0 -2px;
}

.editor-cursor-label {
	position: absolute;
	left: 6px;
	top: -10px;
	padding: 2px 6px;
	border-radius: 6px;
	font-size: 10px;
	font-weight: 700;
	color: var(--color-text-primary);
	background: color-mix(in srgb, var(--color-bg-secondary) 80%, transparent);
	backdrop-filter: blur(6px);
	border: 1px solid color-mix(in srgb, var(--color-border-secondary) 70%, transparent);
	white-space: nowrap;
}

.remote-preview-panel {
	width: 280px;
	flex-shrink: 0;
	border-left: 1px solid var(--color-border-primary);
	background: var(--color-bg-secondary);
	color: var(--color-text-primary);
	display: flex;
	flex-direction: column;
	gap: 12px;
	padding: 12px 14px;
}

.remote-panel-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 10px;
}

.remote-panel-labels {
	display: flex;
	gap: 8px;
	align-items: center;
	flex-wrap: wrap;
}

.remote-badge {
	display: inline-flex;
	align-items: center;
	gap: 6px;
	padding: 6px 10px;
	border-radius: 999px;
	font-size: 12px;
	font-weight: 700;
	text-transform: uppercase;
	color: var(--color-text-primary);
	border: 1px solid var(--color-border-secondary);
	background: color-mix(in srgb, var(--color-bg-tertiary) 50%, transparent);
}

.remote-badge.connected {
	color: #22c55e;
	border-color: color-mix(in srgb, #22c55e 30%, transparent);
	background: color-mix(in srgb, #22c55e 12%, transparent);
}

.remote-badge.just-you {
	color: var(--color-text-tertiary);
}

.remote-users {
	display: flex;
	flex-direction: column;
	gap: 8px;
	margin: 0;
	padding: 0;
	list-style: none;
}

.remote-user {
	display: grid;
	grid-template-columns: auto 1fr auto;
	align-items: center;
	gap: 8px;
	padding: 8px 10px;
	border: 1px solid var(--color-border-secondary);
	border-radius: 10px;
	background: color-mix(in srgb, var(--color-bg-primary) 90%, transparent);
}

.user-status-dot {
	width: 10px;
	height: 10px;
	border-radius: 50%;
}

.user-status-dot.online {
	background: #4ade80;
	box-shadow: 0 0 0 4px color-mix(in srgb, #4ade80 18%, transparent);
}

.user-status-dot.away {
	background: #fbbf24;
	box-shadow: 0 0 0 4px color-mix(in srgb, #fbbf24 18%, transparent);
}

.user-status-dot.offline {
	background: #64748b;
	box-shadow: 0 0 0 4px color-mix(in srgb, #64748b 18%, transparent);
}

.user-meta {
	display: flex;
	flex-direction: column;
	gap: 2px;
	min-width: 0;
}

.user-name {
	font-weight: 700;
	font-size: 14px;
	color: var(--color-text-primary);
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.user-role {
	display: inline-flex;
	align-items: center;
	gap: 4px;
	font-size: 12px;
	padding: 3px 8px;
	border-radius: 999px;
	background: color-mix(in srgb, var(--color-bg-tertiary) 60%, transparent);
	color: var(--color-text-secondary);
	border: 1px solid var(--color-border-secondary);
}

.user-cursor-chip {
	justify-self: flex-end;
	display: inline-flex;
	align-items: center;
	gap: 6px;
	font-size: 12px;
	padding: 4px 8px;
	border-radius: 999px;
	border: 1px dashed var(--color-border-secondary);
	color: var(--color-text-tertiary);
}

.user-color {
	width: 10px;
	height: 10px;
	border-radius: 50%;
	border: 1px solid var(--color-border-primary);
}

.remote-panel-toggle {
	width: 30px;
	height: 30px;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	border-radius: 8px;
	border: 1px solid var(--color-border-secondary);
	background: color-mix(in srgb, var(--color-bg-tertiary) 50%, transparent);
	color: var(--color-text-tertiary);
	cursor: pointer;
	transition:
		border-color var(--editor-transition),
		background-color var(--editor-transition),
		color var(--editor-transition),
		box-shadow var(--editor-transition);
}

.remote-panel-toggle:hover {
	color: var(--color-text-primary);
	border-color: var(--color-border-primary);
	background: color-mix(in srgb, var(--color-bg-tertiary) 70%, transparent);
	box-shadow: 0 6px 20px color-mix(in srgb, var(--color-bg-tertiary) 35%, transparent);
}

.remote-panel-toggle svg {
	width: 16px;
	height: 16px;
}

.remote-panel-collapsed {
	width: 46px;
	flex-shrink: 0;
	border-left: 1px solid var(--color-border-primary);
	background: var(--color-bg-secondary);
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 12px 8px;
}

.sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	border: 0;
}

@media (max-width: 1024px) {
	.editor-container {
		flex-direction: column;
	}

	.remote-preview-panel {
		width: 100%;
		border-left: none;
		border-top: 1px solid var(--color-border-primary);
	}

	.remote-panel-collapsed {
		width: 100%;
		border-left: none;
		border-top: 1px solid var(--color-border-primary);
		justify-content: flex-end;
	}
}
